# utils 文件夹地图

## 地位（Role）
工具函数层，封装浏览器原生API和通用工具函数，为上层组件提供标准化接口。

## 逻辑（Logic）
- **API封装**: 封装浏览器原生API（权限、媒体、位置等），统一错误处理和返回格式
- **平台适配**: 处理不同浏览器和平台的兼容性问题（如iOS Safari的特殊权限要求）
- **类型安全**: 所有工具函数使用TypeScript定义，提供明确的类型约束
- **无副作用**: 工具函数应该是纯函数，不依赖全局状态

## 约束（Constraint）
- **严禁业务逻辑**: 工具函数只负责技术层面的封装，不包含业务规则
- **严禁直接操作DOM**: 工具函数不直接操作DOM，返回数据供组件使用
- **必须处理错误**: 所有可能失败的API调用必须有错误处理
- **必须类型化**: 所有函数参数和返回值必须定义TypeScript类型

## 成员清单

- `permissions.ts` - **Permission API Wrapper**: 封装Web权限API（相机、麦克风、位置、设备方向）
  - 提供统一的权限请求和检查接口
  - 处理iOS Safari的特殊权限要求（DeviceOrientationEvent.requestPermission）
  - 返回标准化的权限状态类型（'granted' | 'denied' | 'prompt' | 'not-supported'）
- `gradients.ts` - **Gradient Utilities**: 渐变相关的工具函数
- `imageUtils.ts` - **Image Processing Utilities**: 图片处理相关的工具函数
