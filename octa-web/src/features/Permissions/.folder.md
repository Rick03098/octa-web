# /src/features/Permissions/.folder.md

## 地位（Role）
特征层的权限申请页面组件，连接八字结果页面和主界面，统一请求相机/麦克风/位置权限。

## 逻辑（Logic）
- **权限管理**: 提供UI界面让用户逐个开启权限（相机、麦克风、位置）
- **状态同步**: 实时显示每个权限的开启状态（off/on/loading）
- **权限验证**: 相机权限为必选项，必须开启才能继续
- **导航控制**: 权限申请完成后导航至主界面

## 依赖关系（Dependencies）
### 输入（INPUT）
- `react-router-dom` 的 `useNavigate`: 用于页面导航
- `constants/strings.ts` 的 `DSStrings`: 获取UI文本字符串
- `utils/permissions.ts`: 权限请求和检查函数
  - `requestCameraPermission()`: 请求相机权限
  - `requestMicrophonePermission()`: 请求麦克风权限
  - `requestLocationPermission()`: 请求位置权限
- `styles/variables.css`: CSS变量（颜色、字体、间距等）

### 输出（OUTPUT）
- 权限状态更新: 触发系统权限弹窗，更新权限状态
- 导航至主界面空状态: 相机权限开启后导航到 `/main-empty`（添加环境界面）

## 约束（Constraint）
- **严禁硬编码权限逻辑**: 必须使用 `utils/permissions.ts` 中的函数
- **严禁直接调用浏览器API**: 必须通过工具函数封装
- **必须使用CSS变量**: 所有颜色、字体、间距必须使用CSS变量
- **必须处理权限拒绝**: 权限被拒绝时显示友好提示
- **必须遵循Figma设计**: 像素级还原设计稿

## 成员清单

- `PermissionsView.tsx` - **Permissions Gatekeeper**: 权限申请页面组件
  - 显示权限列表（相机、麦克风、位置）
  - 处理权限开关点击，调用对应的权限请求函数
  - 管理权限状态（off/on/loading）
  - 验证相机权限是否开启，控制继续按钮的可用性
- `PermissionsView.module.css` - **Permissions Styles**: 权限页面的样式文件
  - 使用CSS变量确保设计系统一致性
  - 像素级精确还原Figma设计
  - 响应式适配和安全区域适配
