# hooks 文件夹地图

## 地位（Role）
React Hooks层，封装可复用的状态逻辑和副作用，连接浏览器API与React组件。

## 逻辑（Logic）
- **状态封装**: 将复杂的状态管理和副作用逻辑封装为可复用的Hook
- **API桥接**: 连接浏览器原生API（如DeviceOrientationEvent）与React组件
- **生命周期管理**: 自动处理组件的挂载/卸载，清理资源
- **类型安全**: 所有Hook使用TypeScript定义，提供明确的类型约束

## 约束（Constraint）
- **严禁UI逻辑**: Hook只负责数据逻辑，不包含UI渲染逻辑
- **严禁直接操作DOM**: Hook通过返回值提供数据，由组件负责渲染
- **必须清理资源**: 所有Hook必须在组件卸载时清理事件监听器和定时器
- **必须类型化**: 所有Hook的参数和返回值必须定义TypeScript类型

## 成员清单

- `useDeviceOrientation.ts` - **Device Orientation Hook**: 设备方向检测Hook（真实罗盘方向）
  - **优先使用绝对罗盘方向**：iOS Safari 使用 `webkitCompassHeading`，Android Chrome 使用 `deviceorientationabsolute` 事件
  - 返回真实的地磁北极方向（0-360度），0度 = 北
  - 自动计算八方位（北/东北/东/东南/南/西南/西/西北）
  - 检测方向稳定性（在指定时间内角度变化小于阈值）
  - 自动处理iOS Safari的权限请求
  - 提供节流采样和稳定性检测算法
  - 导出 `compassHeadingToDirection()` 函数和 `DIRECTION_NAMES` 方位名称映射
  - 返回方向数据（alpha、direction、directionName、absolute）、稳定状态、监听控制函数
